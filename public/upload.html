<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload your receipts</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body
  style="background: linear-gradient(to bottom left, #000000, #63d97df8); min-height: 100vh; background-attachment:fixed;">
  <div class="container mt-2">
    <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
      <div class="row justify-content-center text-start mt-5">
        <div class="col-11 col-lg-6 pb-3 border  border-secondary border-2 rounded-0">
          <label for="formFile" class="form-label"> <span class="fw-normal fs-5 fst-normal ps-3 text-light">Wähle eine
              Bilddatei</span> </label>
          <input class="form-control form-control-lg bg-transparent
          text-light" type="file" name="uploaded_receipt" id="formFile">
          <input
            onclick="document.getElementById('loadingSpinner').style.display = 'block'; document.getElementById('receiptInfos').innerHTML='';document.getElementById('productsTable').innerHTML='';"
            type="submit" class="mt-3 rounded-pill border bor der-2 border-secondary px-5 py-2">
          <span id="errorMessage" class="mt-3 fw-normal fs-6 fst-normal ms-3 text-light"></span>
        </div>
      </div>
    </form>
    <div class="row justify-content-center">
      <div class="btn-group col-11 col-lg-6 mt-5" role="group" aria-label="Basic radio toggle button group">
        <input onclick="changeContent('einkaufsdetailsView');" type="radio" class="btn-check" name="btnradio" id="einkaufsdetails" autocomplete="off" checked>
        <label class="btn btn-outline-secondary text-light" for="einkaufsdetails">Einkaufsdetails</label>
    
        <input onclick="changeContent('meineKassenbonsView');getAllReceipts();" type="radio" class="btn-check" name="btnradio" id="meineKassenbons" autocomplete="off">
        <label class="btn btn-outline-secondary text-light" for="meineKassenbons">Meine Kassenbons</label>
    
        <input onclick="changeContent('analyseView');getAllDataForAnalysis();" type="radio" class="btn-check" name="btnradio" id="analyse" autocomplete="off">
        <label class="btn btn-outline-secondary text-light" for="analyse">Ausgabenübersicht</label>
      </div>
    </div>
    <div id="einkaufsdetailsView" class="views">
      <form id="receiptForm" action="/saveReceiptToDatabase" method="POST">
        <div class="row justify-content-center">
          <div class="col-11 col-lg-6 mt-3 text-center">
            <table id="receiptInfos" class="table table-borderless table-sm">
            </table>
            <div class="d-flex justify-content-center mt-5">
              <div id="loadingSpinner" class="spinner-border text-success mt-5" role="status"
                style="display: none;width: 4rem; height: 4rem;">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-11 col-lg-6">
            <table class="table table-hover table-sm table-responsive" id="productsTable">

            </table>
          </div>
        </div>
      </form>
    </div>
    <div id="meineKassenbonsView" class="views" style="display: none;">

    </div>
    <div id="analyseView" class="views mt-3" style="display: none;">
      <div class="row justify-content-center">
        <div class="col-11 col-lg-6 text-center">
          <select onchange="viewAnalysis(this.value);" required="" id="" name="" class="form-select mb-2" aria-label="Default select example">
            <option value="barchart" selected>Monatliche Ausgaben pro Jahr</option>
            <option value="table">Meistgekaufte Artikel</option>
            <option value="piechart">Jahresausgaben</option>
        </select>
          <div class="allCharts" id="barchart">
            <canvas class="mt-4" id="myChart" style="background-color: white;"></canvas>
          </div>
          <div class="allCharts" id="table" style="display: none;">
            <table class="table table-striped display" id="mostProductsTable">
              <thead>
                <tr class="table-dark">
                  <th scope="col" class="text-light fw-light">Produktname</th>
                  <th scope="col" class="text-light fw-light">Menge</th>
                  <th scope="col" class="text-light fw-light">Summe</th>
                </tr>
              </thead>
              <tbody id="mostProductsTableContent">

              </tbody>
              
            </table>
          </div>
          <div class="allCharts" id="piechart" style="display: none;">

          </div>
        </div>
      </div>
    </div>
  </div>

  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
  </script>

  <script src="main.js"></script>
  <script src="viewController.js"></script>
  <script src="analysis.js"></script>
</body>

</html>

</tbody>
</table>
</div>
</div>`
