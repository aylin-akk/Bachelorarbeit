<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload your receipts</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body
  style="background: linear-gradient(to bottom left, #000000, #63d97df8); min-height: 100vh; background-attachment:fixed;">
  <div class="container mt-2">
    <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
      <div class="row justify-content-center text-start mt-5">
        <div class="col-11 col-lg-6 pb-3 border  border-secondary border-2 rounded-0">
          <label for="formFile" class="form-label"> <span class="fw-normal fs-5 fst-normal ps-3 text-light">W채hle eine
              Bilddatei</span> </label>
          <input class="form-control form-control-lg bg-transparent
          text-light" type="file" name="uploaded_receipt" id="formFile">
          <input
            onclick="prepareViewForUpload();"
            type="submit" class="mt-3 rounded-pill border bor der-2 border-secondary px-5 py-2">
          <span id="errorMessage" class="mt-3 fw-normal fs-6 fst-normal ms-3 text-light"></span>
        </div>
      </div>
    </form>
    <div class="row justify-content-center">
      <div class="btn-group col-11 col-lg-6 mt-5" role="group" aria-label="Basic radio toggle button group">
        <input onclick="changeContent('einkaufsdetailsView');" type="radio" class="btn-check" name="btnradio" id="einkaufsdetails" autocomplete="off" checked>
        <label class="btn btn-outline-secondary text-light" for="einkaufsdetails">Einkaufsdetails</label>
    
        <input onclick="changeContent('meineKassenbonsView');getAllReceipts();" type="radio" class="btn-check" name="btnradio" id="meineKassenbons" autocomplete="off">
        <label class="btn btn-outline-secondary text-light" for="meineKassenbons">Meine Kassenbons</label>
    
        <input onclick="changeContent('analyseView');getAllDataForAnalysis();" type="radio" class="btn-check" name="btnradio" id="analyse" autocomplete="off">
        <label class="btn btn-outline-secondary text-light" for="analyse">Ausgaben체bersicht</label>
      </div>
    </div>
    <div id="einkaufsdetailsView" class="views">
      <form id="receiptForm" action="/saveReceiptToDatabase" method="POST">
        <div class="row justify-content-center">
          <div class="col-11 col-lg-6 mt-3 text-center">
            <table id="receiptInfos" class="table table-borderless table-sm">
            </table>
            <div class="d-flex justify-content-center mt-5">
              <div id="loadingSpinner" class="spinner-border text-success mt-5" role="status"
                style="display: none;width: 4rem; height: 4rem;">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
            <div id="savingSuccessArea">

            </div>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-11 col-lg-6 table-responsive">
            <table class="table table-hover table-sm" id="productsTable">

            </table>
            <div style="display: none;" id="warnArea">
              <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
                <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
                  <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                </symbol>
              </svg>
              <div class="alert alert-danger d-flex align-items-center" role="alert">
                <svg style="width:20px; height:20px" class="bi flex-shrink-0 me-2" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                <div id="warnText">
                  
                </div>
            </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div id="meineKassenbonsView" class="views" style="display: none;">

    </div>
    <div id="analyseView" class="views mt-3" style="display: none;">
      <div class="row justify-content-center">
        <div class="col-11 col-lg-6 text-center">
          <select onchange="viewAnalysis(this.value);" required class="form-select mb-2" aria-label="Default select example">
            <option value="barChart" selected>Monatliche Ausgaben pro Jahr</option>
            <option value="table">Meistgekaufte Artikel</option>
            <option value="pieChart">Jahresausgaben</option>
            <option value="lineChart">Preis채nderungen</option>

          </select>
          <div class="allCharts" id="barChart">
            <canvas class="mt-4" id="myBarChart" style="background-color: white;"></canvas>
          </div>
          <div class="allCharts" id="table" style="display: none;">
            <table class="table table-striped display" id="mostProductsTable">
              <thead>
                <tr class="table-dark">
                  <th scope="col" class="text-light fw-light">Produktname</th>
                  <th scope="col" class="text-light fw-light">Menge</th>
                  <th scope="col" class="text-light fw-light">Summe</th>
                </tr>
              </thead>
              <tbody id="mostProductsTableContent">

              </tbody>
            </table>
          </div>
          <div class="allCharts" id="pieChart" style="display: none;">
            <canvas class="mt-4" id="myPieChart" width="400" height="400" style="background-color: rgba(255, 255, 255, .9);"></canvas>
          </div>
          <div class="allCharts" id="lineChart" style="display: none;">
            <select onchange="generateLineChartForPriceChange(this.value);" required id="lineChartProductsList" name="" class="form-select mb-2" aria-label="Default select example">
              <option value="default" selected>Bitte Produkt w채hlen</option>

            </select>
            <canvas class="mt-4" id="myLineChart" style="background-color: white"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
  </script>

  <script src="main.js"></script>
  <script src="viewController.js"></script>
  <script src="analysis.js"></script>
</body>

</html>
